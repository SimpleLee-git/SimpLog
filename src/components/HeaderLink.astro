---
import type { HTMLAttributes } from "astro:types";

type Props = HTMLAttributes<"a">;

const { href, class: className, ...props } = Astro.props;
const pathname = Astro.url.pathname;

const base = import.meta.env.BASE_URL.replace(/\/$/, "");
const normalizedHref = href?.toString().startsWith("/")
	? `${base}${href}`
	: href;

const isActive =
	normalizedHref === pathname ||
	normalizedHref === pathname.replace(/\/$/, "");
---

<a
	href={normalizedHref}
	class:list={[
		className,
		{
			"text-[var(--text-main)] font-semibold border-b border-current":
				isActive,
		},
	]}
	{...props}
>
	<slot />
</a>
<style>
	a {
		display: inline-block;
		text-decoration: none;
	}
</style>
